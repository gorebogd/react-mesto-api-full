{"ast":null,"code":"import _toConsumableArray from\"/home/bogdan/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/bogdan/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import ImagePopup from'./ImagePopup';import{CurrentUserContext}from'../contexts/CurrentUserContext';import api from'../utils/api';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setIsEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setIsAddPlacePopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditAvatarPopupOpen=_useState8[0],setIsEditAvatarPopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isImagePopupOpen=_useState10[0],setIsImagePopupOpen=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),selectedCard=_useState12[0],setSelectedCard=_useState12[1];useEffect(function(){api.getUserInfo().then(function(userData){setCurrentUser(userData);}).catch(function(err){return console.log(err);});},[currentUser]);function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);setIsImagePopupOpen(true);}function handleUpdateUser(userData){api.setUserInfo(userData).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(avatarData){api.setUserAvatar(avatarData).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsAddPlacePopupOpen(false);setIsImagePopupOpen(false);}var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),cards=_useState14[0],setCards=_useState14[1];function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.toggleLike(card._id,!isLiked).then(function(newCard){var newCards=cards.map(function(c){return c._id===card._id?newCard:c;});setCards(newCards);}).catch(function(err){return console.log(err);});}function handleCardDelete(card){api.removeCard(card._id).then(function(){var newCards=cards.filter(function(item){return item._id!==card._id;});setCards(newCards);}).catch(function(err){return console.log(err);});}useEffect(function(){api.getCards().then(function(res){setCards(res);}).catch(function(err){return console.log(err);});},[]);function handleAddPlaceSubmit(newCard){api.addCard(newCard).then(function(res){setCards([res].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"confirm\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\"}),/*#__PURE__*/_jsx(ImagePopup,{isOpen:isImagePopupOpen,onClose:closeAllPopups,card:selectedCard})]});}export default App;","map":{"version":3,"sources":["/home/bogdan/Рабочий стол/dev/mesto-react/src/components/App.js"],"names":["React","useEffect","useState","Header","Main","Footer","PopupWithForm","ImagePopup","CurrentUserContext","api","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","currentUser","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","getUserInfo","then","userData","catch","err","console","log","handleEditProfileClick","handleEditAvatarClick","handleAddPlaceClick","handleCardClick","card","handleUpdateUser","setUserInfo","res","closeAllPopups","handleUpdateAvatar","avatarData","setUserAvatar","cards","setCards","handleCardLike","isLiked","likes","some","i","_id","toggleLike","newCard","newCards","map","c","handleCardDelete","removeCard","filter","item","getCards","handleAddPlaceSubmit","addCard"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport api from '../utils/api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n\n    const [currentUser, setCurrentUser] = useState({});\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({});\n\n\n    useEffect(() => {\n        api.getUserInfo()\n            .then((userData) => {\n                setCurrentUser(userData);\n            })\n            .catch(err => console.log(err));\n\n    }, [currentUser]);\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n        setIsImagePopupOpen(true);\n    }\n\n    function handleUpdateUser(userData) {\n        api.setUserInfo(userData)\n            .then((res) => {\n                setCurrentUser(res);\n                closeAllPopups();\n            })\n            .catch(err => console.log(err))\n    }\n\n    function handleUpdateAvatar(avatarData) {\n        api.setUserAvatar(avatarData)\n            .then((res) => {\n                setCurrentUser(res);\n                closeAllPopups();\n            })\n            .catch(err => console.log(err));\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsImagePopupOpen(false);\n    }\n\n    const [cards, setCards] = useState([]);\n\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        api.toggleLike(card._id, !isLiked)\n            .then((newCard) => {\n                const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                setCards(newCards);\n            })\n            .catch(err => console.log(err));\n    }\n\n    function handleCardDelete(card) {\n        api.removeCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((item) => item._id !== card._id);\n                setCards(newCards);\n            })\n            .catch((err) => console.log(err))\n    }\n\n    useEffect(() => {\n        api.getCards()\n            .then((res) => {\n                setCards(res);\n            })\n            .catch((err) => console.log(err));\n    }, []);\n\n    function handleAddPlaceSubmit(newCard) {\n        api.addCard(newCard)\n            .then((res) => {\n                setCards([\n                    res,\n                    ...cards,\n                ]);\n                closeAllPopups();\n            })\n            .catch((err) => console.log(err));\n    }\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <Header/>\n            <Main\n                cards={cards}\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n            />\n            <Footer/>\n            <EditProfilePopup\n                isOpen={isEditProfilePopupOpen}\n                onClose={closeAllPopups}\n                onUpdateUser={handleUpdateUser}\n            />\n            <EditAvatarPopup\n                isOpen={isEditAvatarPopupOpen}\n                onClose={closeAllPopups}\n                onUpdateAvatar={handleUpdateAvatar}\n            />\n            <AddPlacePopup\n                isOpen={isAddPlacePopupOpen}\n                onClose={closeAllPopups}\n                onAddPlace={handleAddPlaceSubmit}\n            />\n            <PopupWithForm\n                name='confirm'\n                title='Вы уверены?'\n            />\n            <ImagePopup\n                isOpen={isImagePopupOpen}\n                onClose={closeAllPopups}\n                card={selectedCard}\n            />\n        </CurrentUserContext.Provider>\n\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}